<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset= "UTF-8"> 
  <title><%= full_title(yield(:title)) %></title>
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>

  <link rel="stylesheet" type="text/css" href="assets/normalize.css" />
  <link rel="stylesheet" type="text/css" href="assets/component.css" />


  <link rel="stylesheet" href="http://blueimp.github.io/Gallery/css/blueimp-gallery.min.css"> 
  <link rel="stylesheet" href="assets/bootstrap-image-gallery.min.css">


  <script>
        //User favor/unfavor a smile 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' and provide a simple callback function 
          $('a.favor').click(function(){ 
          	var favorclass = "favor"
          	if ($(this).attr("class") == favorclass)
            { 
              $.post("relationships",
                {
                favored_id: $(this).attr("id")
                },
                function(data, status) { 
                });
            }            
           else 
           	{  
           		$.ajax({ 
           			type: "DELETE",
           			url: "relationships/"+$(this).attr("id"),
           			data: {favored_id: $(this).attr("id")}
           		    
           		});

           	}
           });

        });

    </script> 

    <script>
    //get Qiniu UploadToken
      $(document).ready(function(){ 
      	$('#camera').click(function(){ 
      		$.get("uploadsmile",function(date, status){ 
      		});
      	});
      });
    </script>
  
	<style>
		body {
			background: #444;
		     }
		.codrops-demos a.current-demo {
			color: #999;
		     }
		.codrops-header h1 {
			margin-top: 50px;
			font-family: 'Microsoft Yahei';
			color: #fff;
		}
	</style>



</head>
<body>
  <%= render 'layouts/header' %>
  <div class="container-fluid">
	<% flash.each do |key, value|%>
	  <div class="alert alert-<%= key %>"><%= value %>
      </div>
	<%end%>
  <%= yield %>
  </div>

  <div class="footer-banner" style="width:728px; margin:160px auto 100px"></div>
  <!--	
  <script src="assets/masonry.pkgd.js"></script>
  <script src="assets/imagesloaded.pkgd.min.js"></script>
  <script src="assets/modernizr.custom.js"></script>
  <script src="assets/classie.js"></script>
   -->

  <script src="assets/colorfinder-1.1.js"></script>
  <script src="assets/gridScrollFx.js"></script>
  
  <script>
		new GridScrollFx( document.getElementById( 'grid' ), {
			viewportFactor : 0.4
		} );
  </script>		

  <script src="http://blueimp.github.io/Gallery/js/jquery.blueimp-gallery.min.js"></script>
  <script src="assets/bootstrap-image-gallery.min.js"></script>


  <script type="text/javascript" src="assets/facepp-sdk.min.js"></script>


		<!-- The Bootstrap Image Gallery lightbox, should be a child element of the document body -->
  <div id="blueimp-gallery" class="blueimp-gallery" data-use-bootstrap-modal="false">
    <!-- The container for the modal slides -->
    <div class="slides"></div>
    <!-- Controls for the borderless lightbox -->
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
    <!-- The modal dialog, which will be used to wrap the lightbox content -->
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" aria-hidden="true">&times;</button>
                    <h4 class="modal-title"></h4>
                </div>
                <div class="modal-body next"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left prev">
                        <i class="glyphicon glyphicon-chevron-left"></i>
                        Previous
                    </button>
                    <button type="button" class="btn btn-primary next">
                        Next
                        <i class="glyphicon glyphicon-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade login" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
      <h4 class="modal-title">Log in</h4>
      </div>
      <div class="modal-body">
      <%= form_for(:session, url: sessions_path) do |f| %>
      
      <%= f.label :email %>
      <%= f.text_field :email, class: 'form-control' %>
      
      <%= f.label :password %>
      <%= f.password_field :password, class: 'form-control' %>
      <br>
      <%= f.submit "Log in", class: "btn btn-primary" %>
      <% end %>
      
      </div>
      </div>
</div>
</div>

<div class="modal fade signup" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
      <div class="modal-content">
      
      <div class="modal-header">
      <h4 class="modal-title">Sign up.</h4>
      </div>
      <div class="modal-body">
      <%= form_for User.new do |f| %>
      <%= f.label :name %>
      <%= f.text_field :name,  class: 'form-control'  %>

      <%= f.label :email %>
      <%= f.text_field :email, class: 'form-control'  %>

      <%= f.label :password %>
      <%= f.password_field :password, class: 'form-control'  %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation, class: 'form-control'  %>
      <br>
      <%= f.submit "Create my account", class: "btn btn-primary" %>
      <% end %>
      </div>
      </div>
 
    
    </div>
  </div>
</div>

<div class="modal fade" id="postsmile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Only can upload image with smiling face</h4>
      </div>
      <div class="modal-body">
        <% if signed_in? %>
        <div id="uploadArea">
           
        </div>
        <% else %>
          <%= link_to "Sing in", signin_path %>
        <% end %>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


</body>
</html>